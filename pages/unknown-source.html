<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>uncredited image â€” lupe zambrano</title>
  <meta name="robots" content="noindex">
  <link rel="stylesheet" href="../styles/reset.css">
  <link rel="stylesheet" href="../styles/tokens.css">
  <link rel="stylesheet" href="../styles/base.css">
  <link rel="stylesheet" href="../styles/layout.css">
  <style>
    .wrap { max-width: 960px; margin: 0 auto; }
    .card {
      background: var(--card); border: 1px solid var(--border);
      border-radius: var(--radius); box-shadow: var(--shadow);
      padding: 1rem; display: grid; gap: 1rem;
      grid-template-columns: 1fr 1.1fr;
    }
    .media { overflow: hidden; border-radius: var(--radius); }
    .media img { display:block; width:100%; height:auto; }
    .media .placeholder {
      display:grid; place-items:center; aspect-ratio: 4/3;
      background: var(--soft); color: var(--muted);
      border-radius: var(--radius); font-weight: 600;
    }
    .btnrow { display:flex; flex-wrap:wrap; gap:.5rem; }
    .btn {
      display:inline-block; padding:.6rem .9rem; border-radius:999px;
      border:1px solid var(--border); background:#fff; font-weight:600;
    }
    .btn.primary { background: var(--sage); color:#fff; border-color: transparent; }
    .meta { font-size:.9rem; color:var(--muted); }
    @media (max-width: 820px){ .card{ grid-template-columns: 1fr; } }
    /* hidden utility */
    .is-hidden { display:none !important; }
  </style>
</head>
<body>
  <header class="site-header"><h1>uncredited image</h1></header>

  <main class="container wrap">
    <section class="card" aria-label="uncredited image details">
      <div class="media is-hidden" id="media">
        <div class="placeholder">image preview</div>
      </div>

      <div>
        <h2>help me credit the artist â™¡</h2>
        <p>
          i couldn't verify the original artist/source for this image yet.
          if this is your work, or you know the source, please reach out so i can
          add proper credit or remove it.
        </p>

        <div class="btnrow">
          <a id="creditLink" class="btn primary" href="../pages/guestbook.html">send credit info/request removal</a>
          <a class="btn" href="../pages/gallery.html">return to gallery</a>
        </div>

        <p class="meta is-hidden" id="meta"></p>
        <p class="meta">thank you for helping me keep credits correct ðŸ’•</p>
      </div>
    </section>
  </main>

  <script>
    const params = new URLSearchParams(location.search);
    const file = params.get('file');           // optional
    const alt  = params.get('alt') || '';

    const media = document.getElementById('media');
    const meta  = document.getElementById('meta');

    // include context in contact links (file + referrer if available)
    const contextParts = [];
    if (file) contextParts.push(`file: ${file}`);
    if (document.referrer) contextParts.push(`from: ${document.referrer}`);
    const context = contextParts.length ? ` (${contextParts.join(' | ')})` : '';

    const addContext = (id) => {
      const a = document.getElementById(id);
      a.href += context ? `?msg=${encodeURIComponent(context)}` : '';
    };
    addContext('creditLink');
    addContext('removeLink');

    // if a file is provided, show a preview and filename
    if (file) {
      const img = new Image();
      img.src = decodeURIComponent(file);
      img.alt = alt || 'uncredited image';
      img.referrerPolicy = 'no-referrer';
      media.innerHTML = '';
      media.appendChild(img);
      media.classList.remove('is-hidden');

      const nice = file.split('/').pop();
      meta.textContent = `filename: ${nice}`;
      meta.classList.remove('is-hidden');
    }
  </script>
</body>
</html>
